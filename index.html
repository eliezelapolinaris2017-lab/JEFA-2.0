<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sal√≥n Pro ‚Äî Visor de Citas & Facturas</title>
<style>
 :root{
   --bg:#0f0f12; --fg:#ffffff; --muted:#a7a7b1;
   --gold:#d4af37; --card:#171821; --line:#2a2d40;
   --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
 }
 *{box-sizing:border-box}
 body{margin:0;background:var(--bg);color:var(--fg);
   font:15px/1.5 ui-sans-serif,system-ui,Segoe UI,Roboto,Inter,Arial}
 header{background:#0c0d12;border-bottom:1px solid var(--line);padding:10px 20px}
 header h1{margin:0;font-size:18px;color:var(--gold)}
 .wrap{max-width:1200px;margin:auto;padding:20px}
 .card{background:var(--card);border:1px solid var(--line);border-radius:10px;margin-bottom:20px}
 .bar{display:flex;flex-wrap:wrap;gap:10px;padding:12px}
 label{font-size:13px;color:var(--muted);margin-bottom:4px;display:block}
 input,select{padding:8px;border:1px solid var(--line);background:#11131a;color:var(--fg);border-radius:8px}
 button{padding:8px 12px;border:1px solid var(--line);border-radius:8px;background:#1c1f2b;color:var(--fg);cursor:pointer}
 button.primary{background:linear-gradient(#f6e27a,#c9a227);color:#111;border-color:var(--gold)}
 table{width:100%;border-collapse:collapse}
 th,td{padding:8px 10px;border-bottom:1px solid #22263a}
 th{background:#11131a;text-align:left}
 .pill{padding:3px 8px;border-radius:999px;font-size:12px}
 .pill.ok{background:#0f2316;color:#a7f3d0}
 .pill.warn{background:#231e0f;color:#fde68a}
 .pill.bad{background:#2a1212;color:#fecaca}
</style>
</head>
<body>
<header>
 <h1>üíá‚Äç‚ôÄÔ∏è Sal√≥n Pro ‚Äî Visor de Citas & Facturas</h1>
</header>
<main class="wrap">
   <!-- =========================
      FILTROS DE CITAS
 ========================== -->
 <section class="card">
   <div class="bar">
     <label>
       Desde
       <input type="date" id="cita-desde">
     </label>
     <label>
       Hasta
       <input type="date" id="cita-hasta">
     </label>
     <label>
       T√©cnica / Empleado
       <select id="cita-tecnica"><option value="">Todas</option></select>
     </label>
     <label>
       Estado
       <select id="cita-estado">
         <option value="">Todos</option>
         <option>Confirmada</option>
         <option>Pendiente</option>
         <option>Completada</option>
         <option>No Show</option>
         <option>Cancelada</option>
       </select>
     </label>
     <button id="btn-filtrar-citas" class="primary">Filtrar Citas</button>
   </div>
   <div style="overflow:auto">
     <table id="tabla-citas">
       <thead>
         <tr>
           <th>Fecha</th>
           <th>Hora</th>
           <th>Cliente</th>
           <th>Servicio</th>
           <th>T√©cnica</th>
           <th>Estado</th>
           <th>Notas</th>
         </tr>
       </thead>
       <tbody></tbody>
     </table>
   </div>
 </section>

 <!-- =========================
      FILTROS DE FACTURAS
 ========================== -->
 <section class="card">
   <div class="bar">
     <label>
       Rango
       <select id="fact-rango">
         <option value="">-- Seleccionar --</option>
         <option value="dia">D√≠a</option>
         <option value="semana">Semana</option>
         <option value="mes">Mes</option>
         <option value="ano">A√±o</option>
       </select>
     </label>
     <label>
       T√©cnica / Empleado
       <select id="fact-tecnica"><option value="">Todas</option></select>
     </label>
     <button id="btn-filtrar-facturas" class="primary">Filtrar Facturas</button>
     <button id="btn-exportar-facturas">Exportar Facturas</button>
   </div>
   <div style="overflow:auto">
     <table id="tabla-facturas">
       <thead>
         <tr>
           <th>Fecha</th>
           <th>Cliente</th>
           <th>Servicio</th>
           <th>T√©cnica</th>
           <th>Monto</th>
         </tr>
       </thead>
       <tbody></tbody>
       <tfoot>
         <tr>
           <th colspan="4">TOTAL</th>
           <th id="fact-total">0.00</th>
         </tr>
       </tfoot>
     </table>
   </div>
 </section>
 <script>
// =======================
// VISOR DE CITAS
// =======================
const LS_CITAS = "citasSalonPro";
let citas = [];

// --- Inicializaci√≥n con datos de ejemplo ---
function seedCitas() {
 const raw = localStorage.getItem(LS_CITAS);
 if (raw) {
   citas = JSON.parse(raw);
   return;
 }
 const hoy = new Date();
 const tecnicas = ["Cynthia", "Luz", "Mar√≠a", "Karla"];
 const estados = ["Confirmada", "Pendiente", "Completada", "No Show", "Cancelada"];
 const servicios = ["Gel Tips", "Pedicura Spa", "Color Completo", "Corte & Blow", "Keratina"];
 const clientes = ["Ana L√≥pez", "Carla Rivera", "Yolanda Cruz", "Patricia Soto"];

 let temp = [];
 for (let i = 0; i < 20; i++) {
   const d = new Date(hoy);
   d.setDate(hoy.getDate() - Math.floor(Math.random() * 10));
   temp.push({
     id: crypto.randomUUID(),
     fecha: d.toISOString().slice(0, 10),
     hora: `${String(9 + Math.floor(Math.random() * 8)).padStart(2, "0")}:00`,
     cliente: clientes[Math.floor(Math.random() * clientes.length)],
     servicio: servicios[Math.floor(Math.random() * servicios.length)],
     tecnica: tecnicas[Math.floor(Math.random() * tecnicas.length)],
     estado: estados[Math.floor(Math.random() * estados.length)],
     notas: Math.random() > 0.6 ? "Cliente pidi√≥ dise√±o especial." : ""
   });
 }
 citas = temp;
 localStorage.setItem(LS_CITAS, JSON.stringify(citas));
}

// --- Llenar combo de t√©cnicas ---
function fillTecnicasCitas() {
 const sel = document.getElementById("cita-tecnica");
 const set = Array.from(new Set(citas.map(c => c.tecnica))).sort();
 sel.innerHTML = `<option value="">Todas</option>` + set.map(t => `<option>${t}</option>`).join("");
}

// --- Renderizar citas ---
function renderCitas(arr) {
 const tbody = document.querySelector("#tabla-citas tbody");
 tbody.innerHTML = arr.map(c => `
   <tr>
     <td>${c.fecha}</td>
     <td>${c.hora}</td>
     <td>${c.cliente}</td>
     <td>${c.servicio}</td>
     <td>${c.tecnica}</td>
     <td><span class="pill ${estadoClass(c.estado)}">${c.estado}</span></td>
     <td>${c.notas || ""}</td>
   </tr>
 `).join("");
}
function estadoClass(e) {
 if (e === "Completada" || e === "Confirmada") return "ok";
 if (e === "Pendiente") return "warn";
 return "bad";
}

// --- Filtrar citas ---
function filtrarCitas() {
 const desde = document.getElementById("cita-desde").value;
 const hasta = document.getElementById("cita-hasta").value;
 const tecnica = document.getElementById("cita-tecnica").value;
 const estado = document.getElementById("cita-estado").value;

 let filtradas = citas.filter(c => {
   let fOk = !desde || c.fecha >= desde;
   let hOk = !hasta || c.fecha <= hasta;
   let tOk = !tecnica || c.tecnica === tecnica;
   let eOk = !estado || c.estado === estado;
   return fOk && hOk && tOk && eOk;
 });

 renderCitas(filtradas);
}

// --- Eventos ---
document.getElementById("btn-filtrar-citas").addEventListener("click", filtrarCitas);

// --- Init ---
seedCitas();
fillTecnicasCitas();
filtrarCitas();
</script>
<script>
// =======================
// VISOR DE FACTURAS
// =======================
const LS_FACTURAS = "facturasSalonPro";
let facturas = [];

// --- Sembrar facturas demo ---
function seedFacturas() {
 const raw = localStorage.getItem(LS_FACTURAS);
 if (raw) {
   facturas = JSON.parse(raw);
   return;
 }
 const hoy = new Date();
 const tecnicas = ["Cynthia", "Luz", "Mar√≠a", "Karla"];
 const servicios = ["Gel Tips", "Pedicura Spa", "Color", "Corte", "Blow Dry"];
 const clientes = ["Ana L√≥pez", "Carla Rivera", "Patricia Soto", "Mar√≠a Torres"];

 let temp = [];
 for (let i = 0; i < 25; i++) {
   const d = new Date(hoy);
   d.setDate(hoy.getDate() - Math.floor(Math.random() * 20));
   temp.push({
     id: crypto.randomUUID(),
     fecha: d.toISOString().slice(0,10),
     cliente: clientes[Math.floor(Math.random()*clientes.length)],
     servicio: servicios[Math.floor(Math.random()*servicios.length)],
     tecnica: tecnicas[Math.floor(Math.random()*tecnicas.length)],
     monto: (30 + Math.floor(Math.random()*70)) // entre 30 y 100
   });
 }
 facturas = temp;
 localStorage.setItem(LS_FACTURAS, JSON.stringify(facturas));
}

// --- Llenar combo de t√©cnicas ---
function fillTecnicasFacturas() {
 const sel = document.getElementById("fact-tecnica");
 const set = Array.from(new Set(facturas.map(f => f.tecnica))).sort();
 sel.innerHTML = `<option value="">Todas</option>` + set.map(t => `<option>${t}</option>`).join("");
}

// --- Filtrar facturas ---
function filtrarFacturas() {
 const rango = document.getElementById("fact-rango").value;
 const tecnica = document.getElementById("fact-tecnica").value;
 const hoy = new Date();
 let inicio, fin;

 if(rango === "dia"){
   inicio = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate());
   fin = new Date(inicio); fin.setDate(fin.getDate()+1);
 }
 if(rango === "semana"){
   const dia = hoy.getDay(); // 0 domingo
   inicio = new Date(hoy); inicio.setDate(hoy.getDate()-dia);
   fin = new Date(inicio); fin.setDate(inicio.getDate()+7);
 }
 if(rango === "mes"){
   inicio = new Date(hoy.getFullYear(), hoy.getMonth(), 1);
   fin = new Date(hoy.getFullYear(), hoy.getMonth()+1, 1);
 }
 if(rango === "ano"){
   inicio = new Date(hoy.getFullYear(), 0, 1);
   fin = new Date(hoy.getFullYear()+1, 0, 1);
 }

 let filtradas = facturas.filter(f => {
   const d = new Date(f.fecha);
   let fechaOk = (!inicio || d>=inicio) && (!fin || d<fin);
   let tecnicaOk = !tecnica || f.tecnica===tecnica;
   return fechaOk && tecnicaOk;
 });

 renderFacturas(filtradas);
 return filtradas;
}

// --- Renderizar facturas ---
function renderFacturas(arr) {
 const tbody = document.querySelector("#tabla-facturas tbody");
 let total = 0;
 tbody.innerHTML = arr.map(f => {
   total += Number(f.monto||0);
   return `
     <tr>
       <td>${f.fecha}</td>
       <td>${f.cliente}</td>
       <td>${f.servicio}</td>
       <td>${f.tecnica}</td>
       <td>$${Number(f.monto).toFixed(2)}</td>
     </tr>
   `;
 }).join("");
 document.getElementById("fact-total").textContent = "$"+total.toFixed(2);
}

// --- Exportar facturas CSV ---
function exportarFacturas() {
 const arr = filtrarFacturas();
 if(arr.length===0){ alert("No hay facturas en este rango"); return; }
 let total = 0;
 const cols = ["fecha","cliente","servicio","tecnica","monto"];
 const filas = [cols.join(",")];
 arr.forEach(f=>{
   total += Number(f.monto||0);
   filas.push([f.fecha,f.cliente,f.servicio,f.tecnica,f.monto].join(","));
 });
 filas.push(`TOTAL,,,,${total.toFixed(
